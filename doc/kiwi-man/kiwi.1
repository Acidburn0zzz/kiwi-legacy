.\"     Title: kiwi
.\"    Author: Marcus Schäfer <ms (AT) suse.de>
.\" Generator: DocBook XSL Stylesheets v1.73.1 <http://docbook.sf.net/>
.\"      Date: Created: 11/29/2007
.\"    Manual: KIWI Manualpage
.\"    Source: KIWI v1.98, r847
.\"
.TH "KIWI" "1" "Created: 11/29/2007" "KIWI v1\.98, r847" "KIWI Manualpage"
.\" disable hyphenation
.nh
.\" disable justification (adjust text to left margin only)
.ad l
.SH "NAME"
kiwi - Creating operating system images
.SH "SYNOPSIS"
.HP 5
\fBkiwi\fR {\-l | \-\-list}
.HP 5
\fBkiwi\fR {\-i | \-\-list\-profiles} \fIImagepath\fR
.HP 5
\fBkiwi\fR {\-x | \-\-listxmlinfo} \fIImagepath\fR [\-\-type\ \fIImagetype\fR]
.SH "IMAGE PREPARATION AND CREATION"
.PP
KIWI is a complete imaging solution that is based on an image description\. Such a description is represented by a directory which includes at least one config\.xml file but can also include other files like scripts or configuration data\. With kiwi two example descriptions are provided in /usr/share/doc/packages/kiwi/examples\. A detailed description of the contents of an image description exists in the system design document in /usr/share/doc/packages/kiwi/kiwi\.pdf\. kiwi always operates in two steps the first step is the prepare step and if that step was successful a create step follows which is able to create different image output types\. In the prepare step, you prepare a directory containing the contents of your new filesystem based on one or more software package source(s) (such as openSUSE 10\.3)\. The create step is based on the result of the create step and uses the contents of the new image root tree to create the output image\. If the image type iso was requested the output image would be a file with the suffix \.iso representing a live system on CD or DVD\.
.HP 5
\fBkiwi\fR {\-p | \-\-prepare} \fIImagepath\fR \fIImagepath\fR
.br
[\-\-base\-root\ \fIBasepath\fR] [\-\-base\-root\-mode\ {copy\ |\ union\ |\ recycle}] [\-\-add\-profile\ \fIProfilename\fR]
.HP 5
\fBkiwi\fR {\-c | \-\-create} \fIImageroot\fR
.br
[\-\-base\-root\ \fIBasepath\fR] [\-\-base\-root\-mode\ {copy\ |\ union\ |\ recycle}] [\-\-prebuiltbootimage\ \fIDirectory\fR]
.SH "IMAGE UPGRADE"
.PP
If the image root tree is stored and not removed it can be used for upgrading the image root tree according to the changes made in the repositories used for this image\. If a distributor provides an update channel for package updates and an image config\.xml includes this update channel as repository it is useful to store the image root tree and upgrade the tree according to changes on the update channel\.
.HP 5
\fBkiwi\fR {\-u | \-\-upgrade} \fIImageroot\fR [\-\-base\-root\ \fIBasepath\fR]
.SH "SYSTEM TO IMAGE MIGRATION"
.PP
The migration module allows you to migrate your currently running system into an image description\. The module will check for files not managed by a package manager and it will guess a repository from which this operating system could be rebuild\. Among some other magic the result is quite useful but in almost all cases a manual fine tuning is needed\. This includes the repository selection and the unmanaged files along with the configuration details of your currently running operating system\.
.HP 5
\fBkiwi\fR {\-m | \-\-migrate} \fIname\fR \-\-destdir\ \fIDestinationpath\fR [\-\-exclude\ \fIDirectory\fR...] [\-\-report]
.SH "IMAGE POSTPROCESSING MODES"
.PP
The kiwi postprocessing modes are used for special image deployment tasks, like install the image on a USB stick\. The postprocessing modes are the third step after prepare and create and if possible kiwi calls them automatically depending on the specified output image type and attributes\.
.HP 5
\fBkiwi\fR \-\-bootstick\ \fIInitrd\fR [\-\-bootstick\-system\ \fISystemImage\fR] [\-\-bootstick\-device\ \fIDevice\fR]
.HP 5
\fBkiwi\fR \-\-bootvm\ \fIInitrd\fR \-\-bootvm\-system\ \fISystemImage\fR [\-\-bootvm\-disksize\ \fISize\fR] [\-\-bootvm\-format\ \fIFormat\fR]
.HP 5
\fBkiwi\fR \-\-bootcd\ \fIInitrd\fR
.HP 5
\fBkiwi\fR \-\-installcd\ \fIInitrd\fR \-\-installcd\-system\ \fIVMXSystemImage\fR
.HP 5
\fBkiwi\fR \-\-installstick\ \fIInitrd\fR \-\-installstick\-system\ \fIVMXSystemImage\fR
.SH "HELPER TOOLS"
.PP
The helper tools provides optional functions like the creation of a crypted password string for the users section of the config\.xml file or signing the image description with an md5sum hash as well as adding splash data to the boot image used by the bootloader\.
.HP 5
\fBkiwi\fR \-\-createpassword
.HP 5
\fBkiwi\fR \-\-createhash\ \fIImagepath\fR
.HP 5
\fBkiwi\fR \-\-setup\-grub\-splash\ \fIInitrd\fR
.SH "OPTIONS"
.PP
KIWI has the following options:
.PP
[\fB\-d\fR | \fB\-\-destdir \fR\fB\fIDestinationpath\fR\fR]
.RS 4
Specify destination directory to store the image file(s) If not specified the the attribute
\fIDefaultdestination\fR
is used\. If no destination can be found an error occurs
.RE
.PP
[\fB\-t\fR | \fB\-\-type \fR\fB\fIImagetype\fR\fR]
.RS 4
Specify the output image type to use for this image The type must exist in the
\fIconfig\.xml\fR
description\. By the default the primary type will be used\. If there is no primary attribute set the first type entry of the preferences section is the primary type makes only sense in combination with
\fB\-\-create\fR
.RE
.PP
[\fB\-r\fR | \fB\-\-root \fR\fB\fIRootpath\fR\fR]
.RS 4
Setup the physical extend, chroot system below the given root\-path path\. If no
\fB\-\-root\fR
option is given KIWI will search for the attribute defaultroot in
\fIconfig\.xml\fR\. If no root directory is known a
\fBmktmp\fR
directory will be created and used as root directory
.RE
.PP
[\fB\-s\fR | \fB\-\-strip\fR]
.RS 4
Strip shared objects and executables makes only sense in combination with
\fB\-\-create\fR
.RE
.PP
[\fB\-\-add\-repo \fR\fB\fIRepopath\fR\fR, \fB\-\-add\-repotype \fR\fB\fIType\fR\fR ]
.RS 4
Add the given repository and type for this run of an image prepare or upgrade process\. Multiple
\fB\-\-add\-repo\fR/\fB\-\-add\-repotype\fR
options are possible\. The change will not be written to the
\fIconfig\.xml\fR
file
.RE
.PP
[\fB\-\-ignore\-repos\fR]
.RS 4
Ignore all repositories specified so far, in XML or otherwise\. This option should be used in conjunction with subsequent calls to
\fB\-\-add\-repo\fR
to specify repositories at the commandline that override previous specifications\.
.RE
.PP
[\fB\-\-set\-repo \fR\fB\fIRepopath\fR\fR\fB \fR\fB[\fB\-\-set\-repotype \fR\fB\fIType\fR\fR]\fR]
.RS 4
Set the given repository and optional type for the first repository entry within the
\fIconfig\.xml\fR\. The change will not be written to the XML file and is valid for this run of image prepare or upgrade process\.
.RE
.PP
[\fB\-\-logfile \fR\fB\fIFilename\fR\fR | \fBterminal\fR]
.RS 4
Write to the log file
\fIFilename\fR
instead of the terminal\.
.RE
.PP
[\fB\-\-gzip\-cmd \fR\fB\fIcmd\fR\fR]
.RS 4
Specify an alternate command to run when compressing boot and system images\. Command must accept
\fBgzip\fR
options\.
.RE
.PP
[\fB\-\-force\-new\-root\fR]
.RS 4
Force creation of new root directory\. If the directory already exists, it is deleted\.
.RE
.PP
[\fB\-\-log\-port \fR\fB\fIPortNumber\fR\fR]
.RS 4
Set the log server port\. By default port 9000 is used\. If multiple kiwi processes runs on one system it\'s recommended to set the logging port per process
.RE
.PP
[\fB\-\-rebuiltbootimage \fR\fB\fIDirectory\fR\fR]
.RS 4
Search in
\fIDirectory\fR
for pre\-built boot images\.
.RE
.SH "AUTHORS"
.PP
\fBMarcus Schäfer\fR <\&ms (AT) suse\.de\&>
.sp -1n
.IP "" 4
Developer
.PP
\fBThomas Schraitle\fR <\&thomas\.schraitle (AT) suse\.de\&>
.sp -1n
.IP "" 4
Manpage author

