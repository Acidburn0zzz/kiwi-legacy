#!/bin/sh
# Copyright (c) 1996 SuSE GmbH Nuernberg, Germany.  All rights reserved.
#
# Author: Marcus Schaefer <sax@suse.de>, 2000
# archiving script to create build required files
#
# CVS ID:
# --------
# Status: Up-to-date
#
#===========================================
# make tarball from the current source tree
#-------------------------------------------
rev_new=$(./.version)
rev_old=$(cat ./.revision)
if [ ! $rev_new = $rev_old ];then
	echo $rev_new > .revision
fi
find -type d | grep .git | xargs rm -rf
find -name "*.swp" | xargs rm -f

tar -cjf ../kiwi-docu.tar.bz2 doc
tar -cjf ../kiwi-repo.tar.bz2 system/*repo

rm -rf rpm/
rm -rf doc/
rm -rf system/*repo

cd ..
tar -cjf kiwi.tar.bz2 kiwi/

mv kiwi.tar.bz2      kiwi/
mv kiwi-repo.tar.bz2 kiwi/
mv kiwi-docu.tar.bz2 kiwi/
